<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Dplyr verbs for Spatial — dplyr-Spatial • spdplyr</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Dplyr verbs for Spatial — dplyr-Spatial" />
<meta property="og:description" content="Direct application of the dplyr verbs to Spatial objects. There is no need for a conversion from and to Spatial with this approach. Not all verbs are supported, see Details." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">spdplyr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.4.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/spdplyr.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/mdsumner/spdplyr/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Dplyr verbs for Spatial</h1>
    <small class="dont-index">Source: <a href='https://github.com/mdsumner/spdplyr/blob/master/R/sdplyr-Spatial.r'><code>R/sdplyr-Spatial.r</code></a></small>
    <div class="hidden name"><code>dplyr-Spatial.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Direct application of the dplyr verbs to Spatial objects. There is no need for a conversion from and to Spatial with this approach. Not all verbs are supported, see Details.</p>
    </div>

    <pre class="usage"><span class='co'># S3 method for Spatial</span>
<span class='fu'>mutate</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>transmute</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>summarise</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>group_by</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>arrange</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>slice</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>select</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>rename</span>(<span class='no'>.data</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>distinct</span>(<span class='no'>.data</span>, <span class='no'>...</span>, <span class='kw'>.keep_all</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>left_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>copy</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)

<span class='co'># S3 method for Spatial</span>
<span class='fu'>inner_join</span>(<span class='no'>x</span>, <span class='no'>y</span>, <span class='kw'>by</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>copy</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='no'>...</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.data</th>
      <td><p>A tbl.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Name-value pairs of expressions. See <code><a href='https://rdrr.io/pkg/dplyr/man/se-deprecated.html'>mutate_</a></code></p></td>
    </tr>
    <tr>
      <th>.keep_all</th>
      <td><p>argument for <code><a href='https://dplyr.tidyverse.org/reference/distinct.html'>distinct</a></code>, we have to set it to TRUE</p></td>
    </tr>
    <tr>
      <th>x</th>
      <td><p>A pair of data frames, data frame extensions (e.g. a tibble), or
lazy data frames (e.g. from dbplyr or dtplyr). See <em>Methods</em>, below, for
more details.</p></td>
    </tr>
    <tr>
      <th>y</th>
      <td><p>tbl to join</p></td>
    </tr>
    <tr>
      <th>by</th>
      <td><p>A character vector of variables to join by.</p>
<p>If <code>NULL</code>, the default, <code>*_join()</code> will perform a natural join, using all
variables in common across <code>x</code> and <code>y</code>. A message lists the variables so that you
can check they're correct; suppress the message by supplying <code>by</code> explicitly.</p>
<p>To join by different variables on <code>x</code> and <code>y</code>, use a named vector.
For example, <code>by = c("a" = "b")</code> will match <code>x$a</code> to <code>y$b</code>.</p>
<p>To join by multiple variables, use a vector with length &gt; 1.
For example, <code>by = c("a", "b")</code> will match <code>x$a</code> to <code>y$a</code> and <code>x$b</code> to
<code>y$b</code>. Use a named vector to match different variables in <code>x</code> and <code>y</code>.
For example, <code>by = c("a" = "b", "c" = "d")</code> will match <code>x$a</code> to <code>y$b</code> and
<code>x$c</code> to <code>y$d</code>.</p>
<p>To perform a cross-join, generating all combinations of <code>x</code> and <code>y</code>,
use <code>by = character()</code>.</p></td>
    </tr>
    <tr>
      <th>copy</th>
      <td><p>If <code>x</code> and <code>y</code> are not from the same data source,
and <code>copy</code> is <code>TRUE</code>, then <code>y</code> will be copied into the
same src as <code>x</code>.  This allows you to join tables across srcs, but
it is a potentially expensive operation so you must opt into it.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>mutate, transmute, filter, arrange, slice, select, rename, distinct all work with attributes on the "data" slot and leave the geometry unchanged.</p>
<p>summarise collapses to a grouped geometries by listing all subgeometries together, it does not perform any topological union or merge, and it takes no account of the calculations done on attributes.
This is a brutal collapse of all the data, and is identical to what is seen with spplot(x, "group"). The behaviour of geometric collapse like this
is touch and go anyway, see the examples for a what `rgeos::gUnion` does.</p>
<p>summarise for points and multipoints, ... todo single Multipoint for multiple points</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p>Beware that attributes stored on Spatial objects *are not* linked to the geometry. Attributes are often used to
store the area or perimeter length or centroid values but these may be completely unmatched to the underlying geometries.</p>
    <h2 class="hasAnchor" id="warning"><a class="anchor" href="#warning"></a>Warning</h2>

    

<p>`distinct` uses behaviour identical to `duplicated`, by coercing all the relevant values to text and determining uniqueness
from those. `dplyr::distinct` uses a different internal method that will give different results for some cases of numeric data.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>sp</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>maptools</span>)</div><div class='output co'>#&gt; <span class='message'>Checking rgeos availability: TRUE</span></div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='no'>wrld_simpl</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>spdplyr</span>)
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>raster</span>)</div><div class='output co'>#&gt; <span class='message'></span>
#&gt; <span class='message'>Attaching package: 'raster'</span></div><div class='output co'>#&gt; <span class='message'>The following object is masked from 'package:dplyr':</span>
#&gt; <span class='message'></span>
#&gt; <span class='message'>    select</span></div><div class='input'><span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>NAME</span> <span class='kw'>=</span> <span class='st'>"allthesame"</span>, <span class='kw'>REGION</span> <span class='kw'>=</span> <span class='fu'>row_number</span>())</div><div class='output co'>#&gt; class       : SpatialPolygonsDataFrame 
#&gt; features    : 246 
#&gt; extent      : -180, 180, -90, 83.57027  (xmin, xmax, ymin, ymax)
#&gt; variables   : 11
#&gt; <span style='color: #555555;'># A tibble: 246 x 11</span><span>
#&gt;    FIPS  ISO2  ISO3     UN NAME      AREA POP2005 REGION SUBREGION     LON   LAT
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>    </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'> 1</span><span> AC    AG    ATG      28 allthe~     44  8.30</span><span style='color: #555555;'>e</span><span>4      1        29  -</span><span style='color: #BB0000;'>61.8</span><span>   17.1
#&gt; </span><span style='color: #555555;'> 2</span><span> AG    DZ    DZA      12 allthe~ </span><span style='text-decoration: underline;'>238</span><span>174  3.29</span><span style='color: #555555;'>e</span><span>7      2        15    2.63  28.2
#&gt; </span><span style='color: #555555;'> 3</span><span> AJ    AZ    AZE      31 allthe~   </span><span style='text-decoration: underline;'>8</span><span>260  8.35</span><span style='color: #555555;'>e</span><span>6      3       145   47.4   40.4
#&gt; </span><span style='color: #555555;'> 4</span><span> AL    AL    ALB       8 allthe~   </span><span style='text-decoration: underline;'>2</span><span>740  3.15</span><span style='color: #555555;'>e</span><span>6      4        39   20.1   41.1
#&gt; </span><span style='color: #555555;'> 5</span><span> AM    AM    ARM      51 allthe~   </span><span style='text-decoration: underline;'>2</span><span>820  3.02</span><span style='color: #555555;'>e</span><span>6      5       145   44.6   40.5
#&gt; </span><span style='color: #555555;'> 6</span><span> AO    AO    AGO      24 allthe~ </span><span style='text-decoration: underline;'>124</span><span>670  1.61</span><span style='color: #555555;'>e</span><span>7      6        17   17.5  -</span><span style='color: #BB0000;'>12.3</span><span>
#&gt; </span><span style='color: #555555;'> 7</span><span> AQ    AS    ASM      16 allthe~     20  6.41</span><span style='color: #555555;'>e</span><span>4      7        61 -</span><span style='color: #BB0000;'>171.</span><span>   -</span><span style='color: #BB0000;'>14.3</span><span>
#&gt; </span><span style='color: #555555;'> 8</span><span> AR    AR    ARG      32 allthe~ </span><span style='text-decoration: underline;'>273</span><span>669  3.87</span><span style='color: #555555;'>e</span><span>7      8         5  -</span><span style='color: #BB0000;'>65.2</span><span>  -</span><span style='color: #BB0000;'>35.4</span><span>
#&gt; </span><span style='color: #555555;'> 9</span><span> AS    AU    AUS      36 allthe~ </span><span style='text-decoration: underline;'>768</span><span>230  2.03</span><span style='color: #555555;'>e</span><span>7      9        53  136.   -</span><span style='color: #BB0000;'>25.0</span><span>
#&gt; </span><span style='color: #555555;'>10</span><span> BA    BH    BHR      48 allthe~     71  7.25</span><span style='color: #555555;'>e</span><span>5     10       145   50.6   26.0
#&gt; </span><span style='color: #555555;'># ... with 236 more rows</span><span></div><div class='input'><span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'>transmute</span>(<span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/paste.html'>paste0</a></span>(<span class='no'>FIPS</span>, <span class='no'>NAME</span>))</div><div class='output co'>#&gt; class       : SpatialPolygonsDataFrame 
#&gt; features    : 246 
#&gt; extent      : -180, 180, -90, 83.57027  (xmin, xmax, ymin, ymax)
#&gt; variables   : 1
#&gt; </span><span style='color: #555555;'># A tibble: 246 x 1</span><span>
#&gt;    alpha                
#&gt;    </span><span style='color: #555555;font-style: italic;'>&lt;chr&gt;</span><span>                
#&gt; </span><span style='color: #555555;'> 1</span><span> ACAntigua and Barbuda
#&gt; </span><span style='color: #555555;'> 2</span><span> AGAlgeria            
#&gt; </span><span style='color: #555555;'> 3</span><span> AJAzerbaijan         
#&gt; </span><span style='color: #555555;'> 4</span><span> ALAlbania            
#&gt; </span><span style='color: #555555;'> 5</span><span> AMArmenia            
#&gt; </span><span style='color: #555555;'> 6</span><span> AOAngola             
#&gt; </span><span style='color: #555555;'> 7</span><span> AQAmerican Samoa     
#&gt; </span><span style='color: #555555;'> 8</span><span> ARArgentina          
#&gt; </span><span style='color: #555555;'> 9</span><span> ASAustralia          
#&gt; </span><span style='color: #555555;'>10</span><span> BABahrain            
#&gt; </span><span style='color: #555555;'># ... with 236 more rows</span><span></div><div class='input'><span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span>(<span class='no'>NAME</span> <span class='kw'>%in%</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"New Zealand"</span>, <span class='st'>"Australia"</span>, <span class='st'>"Fiji"</span>))</div><div class='output co'>#&gt; class       : SpatialPolygonsDataFrame 
#&gt; features    : 3 
#&gt; extent      : -180, 180, -54.74973, -10.05167  (xmin, xmax, ymin, ymax)
#&gt; variables   : 11
#&gt; </span><span style='color: #555555;'># A tibble: 3 x 11</span><span>
#&gt;   FIPS  ISO2  ISO3     UN NAME         AREA POP2005 REGION SUBREGION   LON   LAT
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span>       </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span> AS    AU    AUS      36 Australia  </span><span style='text-decoration: underline;'>768</span><span>230  2.03</span><span style='color: #555555;'>e</span><span>7      9        53  136. -</span><span style='color: #BB0000;'>25.0</span><span>
#&gt; </span><span style='color: #555555;'>2</span><span> FJ    FJ    FJI     242 Fiji         </span><span style='text-decoration: underline;'>1</span><span>827  8.28</span><span style='color: #555555;'>e</span><span>5      9        54  178. -</span><span style='color: #BB0000;'>17.8</span><span>
#&gt; </span><span style='color: #555555;'>3</span><span> NZ    NZ    NZL     554 New Zeala~  </span><span style='text-decoration: underline;'>26</span><span>799  4.10</span><span style='color: #555555;'>e</span><span>6      9        53  172. -</span><span style='color: #BB0000;'>42.6</span><span></div><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'>arrange</span>(<span class='no'>LON</span>)
<span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'>slice</span>(<span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>9</span>, <span class='fl'>100</span>))
<span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='https://dplyr.tidyverse.org/reference/select.html'>select</a></span>(<span class='no'>UN</span>, <span class='no'>FIPS</span>)
<span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'>rename</span>(<span class='kw'>`TM_WORLD_BORDERS_SIMPL0.2NAME`</span> <span class='kw'>=</span> <span class='no'>NAME</span>)
<span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'>distinct</span>(<span class='no'>REGION</span>, <span class='kw'>.keep_all</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='kw'>%&gt;%</span>
   <span class='fu'>arrange</span>(<span class='no'>REGION</span>)  <span class='co'>## first alphabetically in REGION</span>
<span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'>arrange</span>(<span class='no'>REGION</span>, <span class='fu'>desc</span>(<span class='no'>NAME</span>)) <span class='kw'>%&gt;%</span> <span class='fu'>distinct</span>(<span class='no'>REGION</span>, <span class='kw'>.keep_all</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>) <span class='co'>## last</span>
}
<span class='co'>## we don't need to use piping</span>
<span class='fu'>slice</span>(<span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span>(<span class='fu'>mutate</span>(<span class='no'>wrld_simpl</span>, <span class='kw'>likepiping</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>), <span class='fu'><a href='https://rdrr.io/r/base/MathFun.html'>abs</a></span>(<span class='no'>LON</span> - <span class='fl'>5</span>) <span class='kw'>&lt;</span> <span class='fl'>35</span> <span class='kw'>&amp;</span> <span class='no'>LAT</span> <span class='kw'>&gt;</span> <span class='fl'>50</span>), <span class='fl'>4</span>)</div><div class='output co'>#&gt; class       : SpatialPolygonsDataFrame 
#&gt; features    : 1 
#&gt; extent      : 20.58093, 31.58893, 59.80499, 69.92722  (xmin, xmax, ymin, ymax)
#&gt; variables   : 12
#&gt; </span><span style='color: #555555;'># A tibble: 1 x 12</span><span>
#&gt;   FIPS  ISO2  ISO3     UN NAME   AREA POP2005 REGION SUBREGION   LON   LAT
#&gt;   </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;fct&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>   </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>  </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span>     </span><span style='color: #555555;font-style: italic;'>&lt;int&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span> </span><span style='color: #555555;font-style: italic;'>&lt;dbl&gt;</span><span>
#&gt; </span><span style='color: #555555;'>1</span><span> FI    FI    FIN     246 Finl~ </span><span style='text-decoration: underline;'>30</span><span>459 5</span><span style='text-decoration: underline;'>246</span><span>004    150       154  26.3  64.5
#&gt; </span><span style='color: #555555;'># ... with 1 more variable: likepiping </span><span style='color: #555555;font-style: italic;'>&lt;lgl&gt;</span><span></div><div class='input'>

<span class='co'>## works with Lines</span>
<span class='co'>#as(wrld_simpl, "SpatialLinesDataFrame") %&gt;%</span>
 <span class='co'># mutate(perim = rgeos::gLength(wrld_simpl, byid = TRUE))</span>

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'>## summarise/ze can be used after group_by, or without</span>
<span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/r/stats/filter.html'>filter</a></span>(<span class='no'>REGION</span> <span class='kw'>==</span> <span class='fl'>150</span>) <span class='kw'>%&gt;%</span> <span class='fu'>summarize</span>(<span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>AREA</span>))
<span class='no'>wrld_simpl</span> <span class='kw'>%&gt;%</span> <span class='fu'>group_by</span>(<span class='no'>REGION</span>) <span class='kw'>%&gt;%</span> <span class='fu'>summarize</span>(<span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>AREA</span>)) <span class='kw'>%&gt;%</span>
<span class='fu'><a href='https://rdrr.io/pkg/raster/man/plot.html'>plot</a></span>(<span class='kw'>col</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/grDevices/palettes.html'>rainbow</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/nlevels.html'>nlevels</a></span>(<span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>wrld_simpl</span>$<span class='no'>REGION</span>)), <span class='kw'>alpha</span> <span class='kw'>=</span> <span class='fl'>0.3</span>))
}
<span class='co'>## group_by and summarize</span>

<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='no'>g</span> <span class='kw'>&lt;-</span> <span class='no'>wrld_simpl</span>  <span class='kw'>%&gt;%</span> <span class='fu'>group_by</span>(<span class='no'>REGION</span>)  <span class='kw'>%&gt;%</span>
 <span class='fu'>summarize</span>(<span class='kw'>alon</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/mean.html'>mean</a></span>(<span class='no'>LON</span>), <span class='kw'>mxlat</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>LAT</span>), <span class='kw'>mxarea</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/Extremes.html'>max</a></span>(<span class='no'>AREA</span>))
<span class='no'>g</span> <span class='kw'>%&gt;%</span> <span class='fu'>mutate</span>(<span class='kw'>ar</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>REGION</span>)) <span class='kw'>%&gt;%</span> <span class='fu'><a href='https://rdrr.io/pkg/raster/man/spplot.html'>spplot</a></span>(<span class='st'>"ar"</span>)
<span class='no'>w</span> <span class='kw'>&lt;-</span> <span class='no'>wrld_simpl</span>
<span class='no'>w</span>$<span class='no'>ar</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/factor.html'>factor</a></span>(<span class='no'>w</span>$<span class='no'>REGION</span>)
<span class='fu'><a href='https://rdrr.io/pkg/raster/man/spplot.html'>spplot</a></span>(<span class='no'>w</span>, <span class='st'>"ar"</span>)
}
<span class='kw'>if</span> (<span class='fl'>FALSE</span>) {
<span class='co'># compare what rgeos gives</span>
<span class='co'>##spplot(rgeos::gUnionCascaded(w, id = w$ar))  ## good grief, is this compelling . . .</span>
<span class='co'>## this is hardly a clean dissolve</span>
<span class='co'>##plot(rgeos::gUnionCascaded(w, id = w$ar), col = rainbow(nlevels(factor(w$ar)), alpha = 0.5))</span>
}</div></span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Michael D. Sumner.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


